# SESSION & LOGOUT - QUICK REFERENCE

## ğŸ¯ KEY CONCEPTS

### Session Policy
- **Landing page (/)** = NO SESSION
- **Session starts** = Only when user clicks language, login, or register
- **Logout** = Destroys EVERYTHING and returns to landing page

---

## ğŸ”„ USER FLOWS

### 1ï¸âƒ£ Fresh Visit
```
User â†’ http://localhost:8080/
â”œâ”€â”€ Landing page loads (NO session)
â”œâ”€â”€ User sees language buttons (EN/MY)
â””â”€â”€ User sees login/register buttons
```

### 2ï¸âƒ£ Language Selection
```
User clicks "English"
â”œâ”€â”€ Session STARTS
â”œâ”€â”€ Language saved to session/cookie
â””â”€â”€ Redirect to appropriate page
```

### 3ï¸âƒ£ Login
```
User clicks "Login"
â”œâ”€â”€ Session STARTS (if not already)
â”œâ”€â”€ Login form displayed
â””â”€â”€ After login â†’ Dashboard or Wizard
```

### 4ï¸âƒ£ Logout
```
User clicks "Logout"
â”œâ”€â”€ Router intercepts request
â”œâ”€â”€ Session DESTROYED completely
â”œâ”€â”€ Cookies CLEARED
â”œâ”€â”€ Browser storage CLEARED
â””â”€â”€ Redirect to landing page (NO session)
```

---

## ğŸ”— LOGOUT LINKS

Use any of these in your HTML:

### Friendly URL (Recommended)
```html
<a href="/logout">Logout</a>
```

### Language-Specific
```html
<!-- English -->
<a href="/pages/en/auth/logout.php">Logout</a>

<!-- Malay -->
<a href="/pages/my/auth/logout.php">Log Keluar</a>
```

**All paths lead to**: Complete session destruction â†’ `/index.html`

---

## ğŸ§ª TESTING

### Check No Session on Landing
1. Open browser (incognito/private mode)
2. Visit `http://localhost:8080/`
3. Open DevTools â†’ Application â†’ Cookies
4. **Expected**: No session cookie

### Check Session Starts
1. Click "English" button
2. Check DevTools â†’ Cookies
3. **Expected**: Session cookie present

### Check Logout Clears Everything
1. Login to dashboard
2. Click "Logout"
3. Check DevTools:
   - Cookies â†’ No session cookie âœ…
   - Application â†’ sessionStorage empty âœ…
   - Application â†’ localStorage empty âœ…
4. **Expected**: Back at landing page

---

## ğŸ”§ ROUTER METHODS

| Method | Purpose |
|--------|---------|
| `isLandingPage()` | Detect if request is for landing page |
| `startSessionIfNeeded()` | Start session only when needed |
| `isLogoutRequest()` | Detect logout request from any path |
| `handleLogout()` | Destroy session and redirect to landing |
| `handleLandingPage()` | Serve landing without session |

---

## ğŸ“ FILES CHANGED

- âœ… `router.php` - Session management + logout handler
- âœ… `pages/en/auth/logout.php` - Redirect to `/index.html`
- âœ… `pages/my/auth/logout.php` - Redirect to `/index.html`

---

## âœ… CHECKLIST

- [x] Landing page has NO session
- [x] Session starts on language selection
- [x] Session starts on login button
- [x] Session starts on register button
- [x] Logout destroys session completely
- [x] Logout clears all cookies
- [x] Logout clears browser storage
- [x] Logout redirects to landing page
- [x] No breaking changes to existing flows

---

## ğŸš€ READY TO TEST!

**Status**: âœ… Implemented and validated  
**Next**: Test logout flow in browser
